# Webtronics - тестовое задание


## Задание
См. [issue](https://github.com/vlad397/webtronics_test/issues/1)


## Описание

`Документация` доступна по адресу *http://127.0.0.1:80/api/docs/*

Возможности проекта:

- регистрация пользователя;
- вход в аккаунт (получение jwt);
- обновление access-токена через refresh-токен;
- создание поста;
- просмотр всех постов;
- просмотр конкретного поста;
- частичное обновление поста;
- удаление поста;
- проставление лайка;
- проставление дизлайка.


## Подробности выполнения


### Основные компоненты системы

- Cервер WSGI — сервер с запущенным приложением;
- Nginx — прокси-сервер, который является точкой входа для веб-приложения;
- FastAPI — используется для бэкенда api;
- PostgreSQL — хранилище данных, в котором лежит вся необходимая информация для сервса;
- SQLAlchemy - используется как ORM.


### Основные сущности

Модели:

`User`:
- id: uuid;
- username;
- password;
- email;
- post: посты пользователя (отошение One-to-Many к модели `Post`);
- liked_posts: посты, которые пользователь лайкнул (отношение M2M к модели `Post`);
- disliked_posts: посты, которые пользователь дизлайкнул (отношение M2M к модели `Post`).

`Post`:
- header;
- description;
- author_id - uuid автора поста (FK к uuid модели `User`);
- author - автор поста (отношение Many-to-One к модели `User`);
- likes_count - количество лайков;
- dislikes_count - количество дизлайков;
- users_who_like - пользователи, которые лайкнули пост (отношение M2M к модели `User`);
- users_who_dislike - пользователи, которые дизлайкнули пост (отношение M2M к модели `User`).

`Like` и `Dislike` (промежуточные таблицы для связи M2M):
- user_id: uuid пользователя (FK к uuid модели `User`);
- post_id: uuid поста (FK к uuid модели `Post`).

Доп. сведения:
- Пользователь не может создать посты с одинаковыми заголовками;
- Если пользователь поставил лайк, а затем передумал и поставил дизлайк, то система корректно отработает -
уменьшит кол-во лайков поста, удалит соответствующие упоминания из базы, увеличит кол-во дизлайков и создаст
соответствующие записи;
- Для эндпоинта всех постов и эндпоинта конкретного поста разные схемы отображения.


## Запуск проекта

После клонирования репозитария создайте `.env` файл на уровне с `.env.dev` - шаблоном env-файла

Для установки Docker используйте команду `sudo apt install docker docker-compose`

Далее на уровне с файлом `docker-compose.yml` выполните команду:

`sudo docker-compose up -d --build` *Для запуска сборки контейнеров*
